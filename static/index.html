<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Speed Test</title>

  <link rel="stylesheet" href="/static/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <h1>Speed Test</h1>
  <p>Download + Upload + Latency visualized together.</p>

  <!-- BUTTONS -->
  <div class="button-row">
  
<button id="fullTestBtn" style="background:#ff9800;color:#fff;"> Run Full Test </button>
  <button id="startBtn">Start Download Test</button>
  

    <!-- WebSocket upload replaces HTTP upload -->
    <button id="uploadBtn" style="background:#9c27b0;color:#fff;">
      Start Upload Test
    </button>

    <!-- UPDATED (GREEN) -->
    <button id="latencyBtn" style="background:#ffeb3b;color:#000;">
      Start Latency Test
    </button>

    
    <button id="clearChartBtn" style="background:#444;color:#fff;">Clear Chart</button>

  </div>

  <!-- COMBINED CHART -->
  <div class="chart-box">
    <canvas id="combinedChart" width="900" height="350"></canvas>
  </div>

<div class="metrics-row">
  <div class="metric-card" id="downloadCard" style="border: 3px solid #2196f3;">
    <div class="metric-label">Download</div>
    <div class="metric-value" id="gaugeText">-- Mbps</div>
  </div>

  <div class="metric-card" id="uploadCard" style="border: 3px solid #9c27b0;">
    <div class="metric-label">Upload</div>
    <div class="metric-value" id="uploadGaugeText">-- Mbps</div>
  </div>

  <div class="metric-card" id="latencyCard" style="border: 3px solid #ffeb3b;">
    <div class="metric-label">Latency</div>
    <div class="metric-value" id="latencyGaugeText">-- ms</div>
  </div>
</div>

<!-- LOG PANEL -->
<div id="logPanel" style="
  width: 900px;
  height: 200px;
  margin: 20px auto;
  padding: 10px;
  background: #111;
  color: #fff;
  font-family: monospace;
  font-size: 14px;
  overflow-y: auto;
  border: 1px solid #444;
  border-radius: 8px;
">
</div>

<button id="clearLogBtn" style="margin: 10px auto; display:block;">
  Clear Logs
</button>



  <!-- JS FILES (combined_chart must load before upload_ws.js!) -->
  <script src="/static/combined_chart.js" defer></script>
  <script src="/static/clear_chart.js" defer></script>
  <script src="/static/log_panel.js" defer></script>
  <script src="/static/download.js" defer></script>

  <!-- REMOVED: HTTP upload -->
  <!-- <script src="/static/upload.js" defer></script> -->

  <script src="/static/latency.js" defer></script>
  <script src="/static/fulltest.js" defer></script>

  <!-- WebSocket upload now handles #uploadBtn -->
  <script src="/static/upload_ws.js" defer></script>

</body>
</html>
